# 自动备份p站收藏到tg频道


单用户单bot模式,多频道


## 目标

1. 数据库储存作品信息(以及对应频道消息的链接)(两个表,一个作品信息表,一个频道消息表)
2. 频道备份预览(原图以图片方式发送被tg压缩,ps:tg对媒体信息有宽高比例要求/宽高总像素要求/文件大小要求,需要判断并手动压缩)
3. 判断备份原图,以文件方式发送出去
4. 作品类型支持:插画 漫画(与插画一样) 动图(以源图片帧打包形式发送,无预览) 小说(文本文件形式发送,预览可以为前指定长度字符)(暂不打算支持小说了,和其他作品信息结构不太相同)
5. 漫画无预览,所以支持手动命令bot生成gif替换为预览(不自动化生成,因为占用资源较多,可选自动)
6. 多频道备份,不局限于一个频道里
7. bot与备份耦合性,在原有数据库的情况下可以随意切换bot
8. bot对话/bot所在群组 搜索(tag搜索/标题搜索/pid搜索/作者id搜索/作者名搜索,非id搜索均为匹配部分字符串搜索) 随机收藏(tag黑白名单) 功能
9. 快捷取消收藏按钮(直接在p站内取消收藏且删除对应数据库记录及频道消息)(以防bot切换后内联按钮失效,允许命令取消收藏)(sendMediaGroup不支持内联按钮...)
10. 快捷收藏(将pid/作品链接发送给bot会直接收藏)
11. 手动添加(使用bot命令,且需将指定文件放到指定位置,需要文件为meta和原文件)

